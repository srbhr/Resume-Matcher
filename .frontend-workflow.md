# Frontend Workflow Documentation

This document outlines the user flow and architecture for the Resume Matcher frontend. The application follows a "Master Resume" centric workflow, allowing users to maintain a base resume and tailor it for specific job descriptions.

## Core Workflow

### 1. Dashboard & Initialization (`/dashboard`)
The entry point of the application.
-   **State**: Checks `localStorage` for a `master_resume_id`.
-   **No Master Resume**: Displays an "Initialize Master Resume" card.
    -   Triggers `ResumeUploadDialog`.
    -   On success: Saves `resume_id` to `localStorage` and updates UI.
-   **Master Resume Exists**: Displays a "Master Resume" card.
    -   **Action**: Clicking the card navigates to the **Resume Viewer** (`/resumes/[id]`).
    -   **Clear**: A trash icon allows removing the master resume ID from local storage.

### 2. Resume Viewer (`/resumes/[id]`)
A read-only hub for a specific resume (either the Master or a Tailored version).
-   **Data Fetching**: Fetches resume details from the backend using the `id` from the URL.
-   **Display**: Uses the `Resume` component to render the document in an A4-like format.
-   **Actions**:
    -   **Edit Resume**: Navigates to `/builder?id=[id]`.
    -   **Create Resume**: Navigates to `/tailor` (using this resume as the base).

### 3. Tailoring Process (`/tailor`)
The core AI feature where a Master Resume is optimized for a specific job.
-   **Input**: Large text area for the Job Description (JD).
-   **Validation**: Enforces a minimum character count (e.g., 50 chars) to ensure valid input.
-   **Process**:
    1.  **Upload JD**: Sends JD to `/api/v1/jobs/upload`.
    2.  **Improve**: Calls `/api/v1/resumes/improve` with `master_resume_id` and `job_id`.
-   **Output**:
    -   Redirects to the **Resume Viewer** (`/resumes/[new_id]`) for the newly created resume.
    -   The new resume is saved in the backend and can be edited further.

### 4. Resume Builder (`/builder`)
The editor interface for modifying resume content.
-   **Modes**:
    -   **Create/Preview Mode**: If accessed via the tailored flow (data passed via `ResumePreviewContext`).
    -   **Edit Mode**: If accessed via URL query param (`?id=xyz`). Fetches data from the backend.
-   **Components**:
    -   **Left Panel**: `ResumeForm` for editing fields (Personal Info, Experience, etc.).
    -   **Right Panel**: Live preview using the `Resume` component.
-   **Persistence**: Currently supports exporting to JSON. Save functionality (backend update) is a future enhancement.

## Key Components

-   **`ResumePreviewProvider`**: React Context for passing transient state (like AI generation results) between routes.
-   **`ResumeUploadDialog`**: Handles file upload to the backend.
-   **`Resume`**: Shared component for rendering the resume layout. Used in Viewer, Builder (Preview), and Dashboard (thumbnail).

## State Management

-   **Local Storage**: Persists the `master_resume_id` to maintain the user's setup across sessions.
-   **URL Params**: Used to identify specific resumes for viewing (`/resumes/[id]`) or editing (`/builder?id=...`).
-   **Context API**: Used for passing immediate results from the AI tailoring process to the Builder/Viewer.

